<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Calculadora FIFO P2P</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body data-page="main">
    <header class="hero">
      <div class="hero-content">
        <div>
          <h1>Calculadora FIFO P2P</h1>
          <p>
            Registra tus transacciones USD → COP → USDT → USD y calcula la ganancia
            realizada con base FIFO.
          </p>
        </div>
        <a class="btn btn-secondary" href="history.html">Ver historial completo</a>
      </div>
    </header>

    <main class="page-content">
      <section class="transaction-columns">
        <article class="card transaction-card" data-form="usd-cop">
          <h2>1) Compra de COP con USD</h2>
          <p class="hint">
            Agrega una compra y usa la última transacción solo como referencia.
          </p>
          <div class="form-grid">
            <label>
              Fecha
              <input type="date" name="date" />
            </label>
            <label>
              USD usados
              <input type="number" name="usd" placeholder="0.00" />
            </label>
            <label>
              COP recibidos
              <input type="number" name="cop" placeholder="0" />
            </label>
          </div>
          <button class="btn" type="button" data-action="add">
            + Agregar compra USD → COP
          </button>
          <div class="last-transaction" data-last="usd-cop"></div>
        </article>

        <article class="card transaction-card" data-form="cop-usdt">
          <h2>2) Compra de USDT con COP</h2>
          <p class="hint">
            Agrega una compra y usa la última transacción solo como referencia.
          </p>
          <div class="form-grid">
            <label>
              Fecha
              <input type="date" name="date" />
            </label>
            <label>
              COP usados
              <input type="number" name="cop" placeholder="0" />
            </label>
            <label>
              USDT recibidos
              <input type="number" name="usdt" placeholder="0.00" />
            </label>
          </div>
          <button class="btn" type="button" data-action="add">
            + Agregar compra COP → USDT
          </button>
          <div class="last-transaction" data-last="cop-usdt"></div>
        </article>

        <article class="card transaction-card" data-form="usdt-usd">
          <h2>3) Venta de USDT por USD</h2>
          <p class="hint">
            Agrega una venta y usa la última transacción solo como referencia.
          </p>
          <div class="form-grid">
            <label>
              Fecha
              <input type="date" name="date" />
            </label>
            <label>
              USDT vendidos
              <input type="number" name="usdt" placeholder="0.00" />
            </label>
            <label>
              USD recibidos
              <input type="number" name="usd" placeholder="0.00" />
            </label>
          </div>
          <button class="btn" type="button" data-action="add">
            + Agregar venta USDT → USD
          </button>
          <div class="last-transaction" data-last="usdt-usd"></div>
        </article>
      </section>

      <section class="card results">
        <h2>Resumen fiscal</h2>
        <div class="results-grid">
          <div>
            <h3>Totales</h3>
            <ul>
              <li><strong>USD recibidos:</strong> <span data-total="proceeds">0.00</span></li>
              <li><strong>Costo base (USD):</strong> <span data-total="basis">0.00</span></li>
              <li><strong>Ganancia neta:</strong> <span data-total="gain">0.00</span></li>
            </ul>
          </div>
          <div>
            <h3>Inventario pendiente</h3>
            <ul>
              <li><strong>COP disponibles:</strong> <span data-total="cop">0.00</span></li>
              <li><strong>USDT disponibles:</strong> <span data-total="usdt">0.00</span></li>
            </ul>
          </div>
        </div>
        <div class="alert" data-alert></div>
      </section>
    </main>

    <footer>
      <p>
        La calculadora usa FIFO para asignar costo. Verifica con tu asesor
        fiscal los requisitos locales.
      </p>
    </footer>

    <script src="app.js"></script>
  </body>
</html>
